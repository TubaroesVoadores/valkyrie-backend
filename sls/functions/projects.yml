CreateProject:
  handler: src/functions/projects/createProject.main
  events:
    - http:
        method: post
        path: projects
        cors: true
  iamRoleStatementsName: ${self:service}-${self:custom.stage}-create-project
  iamRoleStatements:
    - Effect: Allow
      Action:
        - dynamodb:PutItem
      Resource: !GetAtt [projectsTableDynamo, Arn]

DeleteProject:
  handler: src/functions/projects/deleteProject.main
  events:
    - http:
        method: delete
        path: projects/{projectId}
        cors: true
  iamRoleStatementsName: ${self:service}-${self:custom.stage}-delete-project
  iamRoleStatements:
    - Effect: Allow
      Action:
        - dynamodb:PutItem
      Resource: !GetAtt [projectsTableDynamo, Arn]

UpdateProject:
  handler: src/functions/projects/updateProject.main
  events:
    - http:
        method: put
        path: projects/{projectId}
        cors: true
  iamRoleStatementsName: ${self:service}-${self:custom.stage}-update-project
  iamRoleStatements:
    - Effect: Allow
      Action:
        - dynamodb:PutItem
      Resource: !GetAtt [projectsTableDynamo, Arn]

GetProject:
  handler: src/functions/projects/getProject.main
  events:
    - http:
        method: get
        path: projects/{projectId}
        cors: true
  iamRoleStatementsName: ${self:service}-${self:custom.stage}-get-project
  iamRoleStatements:
    - Effect: Allow
      Action:
        - dynamodb:GetItem
      Resource: !GetAtt [projectsTableDynamo, Arn]
    - Effect: Allow
      Action:
        - dynamodb:GetItem
      Resource: !GetAtt [imagesTableDynamo, Arn]

ListProjects:
  handler: src/functions/projects/listProjects.main
  events:
    - http:
        method: get
        path: projects
        cors: true
  iamRoleStatementsName: ${self:service}-${self:custom.stage}-list-projects
  iamRoleStatements:
    - Effect: Allow
      Action:
        - dynamodb:GetItem
      Resource: !GetAtt [projectsTableDynamo, Arn]

sendEmailProject:
  handler: src/functions/projects/sendEmailProject.main
  events:
    - http:
        method: post
        path: projects
        cors: true
  iamRoleStatementsName: ${self:service}-${self:custom.stage}-send-email-project
